<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_crm_lead_form_kito" model="ir.ui.view">
            <field name="name">crm.lead.form.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_lead_view_form" />
            <field name="arch" type="xml">
                
                <xpath expr="//label[@for='name']" position="before">
                    <label for="number" attrs="{'invisible': [('number', '=', False)]}"/>
                    <h5><field name="number" attrs="{'invisible': [('number', '=', False)]}" readonly="1" force_save="1"/></h5>
                </xpath>

                <!-- <xpath expr="//form/header//button[@name='%(crm_helpdesk.crm_lead_convert2ticket_action)d']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                </xpath> -->

            	<xpath expr="//group/group[1]/field[@name='lang_id']" position="after">
                    <field name='industry_id' 
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='grade_id'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='region_id'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='bp_group'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='sap_ref'/>
                </xpath>
                <xpath expr="//field[@name='tag_ids']" position="after">
                    <field name="is_competitor"/>
                </xpath> 

                <xpath expr="//group/group[2]/div[2]" position="after">
                    <field name='industry_id'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='grade_id'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='region_id'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='bp_group'
                        options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name='sap_ref'/>
                </xpath> 
                <xpath expr="//group[@name='lead_priority']/field[@name='tag_ids']" 
                    position="after">
                    <field name="is_competitor"/>
                </xpath>

                <xpath expr="//field[@name='user_id']" position="before">
                    <field name="area_sales_manager"
                        options="{'no_create': True, 'no_create_edit': True}"/>
                </xpath>
            </field>
        </record>

        <record id="view_crm_lead_tree_kito" model="ir.ui.view">
            <field name="name">crm.lead.tree.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_tree_view_leads" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='country_id']" position="after">
                    <field name='industry_id' optional="hide"/>
                    <field name='grade_id' optional="hide"/>
                    <field name='region_id' optional="hide"/>
                    <field name='bp_group' optional="hide"/>
                    <field name='sap_ref' optional="hide"/>
                </xpath> 
            </field>
        </record>

        <record id="view_crm_opportunity_tree_kito" model="ir.ui.view">
            <field name="name">crm.opportunity.tree.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_tree_view_oppor" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='country_id']" position="after">
                    <field name='industry_id' optional="hide"/>
                    <field name='grade_id' optional="hide"/>
                    <field name='region_id' optional="hide"/>
                    <field name='bp_group' optional="hide"/>
                    <field name='sap_ref' optional="hide"/>
                </xpath> 
            </field>
        </record>

        <record id="view_crm_lead_search_kito" model="ir.ui.view">
            <field name="name">crm.lead.search.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_leads_filter" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="number"/>
                </xpath>
                <xpath expr="//field[@name='campaign_id']" position="after">
                    <field name='referred'/>
                    <field name='sap_ref'/>
                    <field name='industry_id' />
                    <field name='grade_id'/>
                    <field name='region_id'/>
                    <field name="bp_group"/>
                    <field name="area_sales_manager"/>
                </xpath>
                <xpath expr="//filter[@name='saleschannel']" position="after">
                    <filter string="Industry" name="industry" context="{'group_by':'industry_id'}"/>
                    <filter string="Relationship" name="grade_id" context="{'group_by':'grade_id'}"/>
                    <filter string="Region" name="region_id" context="{'group_by':'region_id'}"/>
                    <filter string="BP Group" name="bp_group" context="{'group_by':'bp_group'}"/>
                    <filter string="Area Sales Manager" name="area_sales_manager" 
                        context="{'group_by':'area_sales_manager'}"/>
                </xpath>
            </field>
        </record>

        <record id="view_crm_opportunity_search_kito" model="ir.ui.view">
            <field name="name">crm.opportunity.search.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="number"/>
                </xpath>

                <xpath expr="//field[@name='country_id']" position="after">
                    <field name='referred'/>
                    <field name='sap_ref'/>
                    <field name='industry_id' />
                    <field name='grade_id'/>
                    <field name='region_id'/>
                    <field name="bp_group"/>
                    <field name="area_sales_manager"/>
                </xpath>

                <xpath expr="//filter[@name='country']" position="after">
                    <filter string="Industry" name="industry" context="{'group_by':'industry_id'}"/>
                    <filter string="Relationship" name="grade_id" context="{'group_by':'grade_id'}"/>
                    <filter string="Region" name="region_id" context="{'group_by':'region_id'}"/>
                    <filter string="BP Group" name="bp_group" context="{'group_by':'bp_group'}"/>
                    <filter string="Area Sales Manager" name="area_sales_manager" 
                        context="{'group_by':'area_sales_manager'}"/>
                </xpath>
            </field>
        </record>

        <!-- Hide Assign Partner button from Lead -->
        <record id="view_crm_hide_assign_partner_kito" model="ir.ui.view">
            <field name="name">crm.hide.assign.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" 
                ref="website_crm_partner_assign.view_crm_lead_opportunity_geo_assign_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_assign_partner']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <!-- Allow to create Ticket from opportunity -->
        <record id="view_crm_helpdek_lead_kito" model="ir.ui.view">
            <field name="name">crm.help.lead.form.kito</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm_helpdesk.crm_lead_view_form" />
            <field name="arch" type="xml">
            <xpath expr="//button[@name='%(crm_helpdesk.crm_lead_convert2ticket_action)d']" position="attributes">
                    <attribute name="attrs">{}</attribute>
            </xpath>
        </field>
    </record>

    </data>
</odoo>